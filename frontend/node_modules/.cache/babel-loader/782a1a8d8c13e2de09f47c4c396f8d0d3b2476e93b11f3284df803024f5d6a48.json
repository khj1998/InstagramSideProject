{"ast":null,"code":"'use strict';\n\nvar random = require('../../utils/random'),\n  urlUtils = require('../../utils/url');\nvar debug = function () {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender:jsonp');\n}\nvar form, area;\nfunction createIframe(id) {\n  debug('createIframe', id);\n  try {\n    // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n    return global.document.createElement('<iframe name=\"' + id + '\">');\n  } catch (x) {\n    var iframe = global.document.createElement('iframe');\n    iframe.name = id;\n    return iframe;\n  }\n}\nfunction createForm() {\n  debug('createForm');\n  form = global.document.createElement('form');\n  form.style.display = 'none';\n  form.style.position = 'absolute';\n  form.method = 'POST';\n  form.enctype = 'application/x-www-form-urlencoded';\n  form.acceptCharset = 'UTF-8';\n  area = global.document.createElement('textarea');\n  area.name = 'd';\n  form.appendChild(area);\n  global.document.body.appendChild(form);\n}\nmodule.exports = function (url, payload, callback) {\n  debug(url, payload);\n  if (!form) {\n    createForm();\n  }\n  var id = 'a' + random.string(8);\n  form.target = id;\n  form.action = urlUtils.addQuery(urlUtils.addPath(url, '/jsonp_send'), 'i=' + id);\n  var iframe = createIframe(id);\n  iframe.id = id;\n  iframe.style.display = 'none';\n  form.appendChild(iframe);\n  try {\n    area.value = payload;\n  } catch (e) {\n    // seriously broken browsers get here\n  }\n  form.submit();\n  var completed = function (err) {\n    debug('completed', id, err);\n    if (!iframe.onerror) {\n      return;\n    }\n    iframe.onreadystatechange = iframe.onerror = iframe.onload = null;\n    // Opera mini doesn't like if we GC iframe\n    // immediately, thus this timeout.\n    setTimeout(function () {\n      debug('cleaning up', id);\n      iframe.parentNode.removeChild(iframe);\n      iframe = null;\n    }, 500);\n    area.value = '';\n    // It is not possible to detect if the iframe succeeded or\n    // failed to submit our form.\n    callback(err);\n  };\n  iframe.onerror = function () {\n    debug('onerror', id);\n    completed();\n  };\n  iframe.onload = function () {\n    debug('onload', id);\n    completed();\n  };\n  iframe.onreadystatechange = function (e) {\n    debug('onreadystatechange', id, iframe.readyState, e);\n    if (iframe.readyState === 'complete') {\n      completed();\n    }\n  };\n  return function () {\n    debug('aborted', id);\n    completed(new Error('Aborted'));\n  };\n};","map":{"version":3,"names":["random","require","urlUtils","debug","process","env","NODE_ENV","form","area","createIframe","id","global","document","createElement","x","iframe","name","createForm","style","display","position","method","enctype","acceptCharset","appendChild","body","module","exports","url","payload","callback","string","target","action","addQuery","addPath","value","e","submit","completed","err","onerror","onreadystatechange","onload","setTimeout","parentNode","removeChild","readyState","Error"],"sources":["C:/코테이토5기 MSA스터디/InstagramClone/frontend/node_modules/sockjs-client/lib/transport/sender/jsonp.js"],"sourcesContent":["'use strict';\r\n\r\nvar random = require('../../utils/random')\r\n  , urlUtils = require('../../utils/url')\r\n  ;\r\n\r\nvar debug = function() {};\r\nif (process.env.NODE_ENV !== 'production') {\r\n  debug = require('debug')('sockjs-client:sender:jsonp');\r\n}\r\n\r\nvar form, area;\r\n\r\nfunction createIframe(id) {\r\n  debug('createIframe', id);\r\n  try {\r\n    // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\r\n    return global.document.createElement('<iframe name=\"' + id + '\">');\r\n  } catch (x) {\r\n    var iframe = global.document.createElement('iframe');\r\n    iframe.name = id;\r\n    return iframe;\r\n  }\r\n}\r\n\r\nfunction createForm() {\r\n  debug('createForm');\r\n  form = global.document.createElement('form');\r\n  form.style.display = 'none';\r\n  form.style.position = 'absolute';\r\n  form.method = 'POST';\r\n  form.enctype = 'application/x-www-form-urlencoded';\r\n  form.acceptCharset = 'UTF-8';\r\n\r\n  area = global.document.createElement('textarea');\r\n  area.name = 'd';\r\n  form.appendChild(area);\r\n\r\n  global.document.body.appendChild(form);\r\n}\r\n\r\nmodule.exports = function(url, payload, callback) {\r\n  debug(url, payload);\r\n  if (!form) {\r\n    createForm();\r\n  }\r\n  var id = 'a' + random.string(8);\r\n  form.target = id;\r\n  form.action = urlUtils.addQuery(urlUtils.addPath(url, '/jsonp_send'), 'i=' + id);\r\n\r\n  var iframe = createIframe(id);\r\n  iframe.id = id;\r\n  iframe.style.display = 'none';\r\n  form.appendChild(iframe);\r\n\r\n  try {\r\n    area.value = payload;\r\n  } catch (e) {\r\n    // seriously broken browsers get here\r\n  }\r\n  form.submit();\r\n\r\n  var completed = function(err) {\r\n    debug('completed', id, err);\r\n    if (!iframe.onerror) {\r\n      return;\r\n    }\r\n    iframe.onreadystatechange = iframe.onerror = iframe.onload = null;\r\n    // Opera mini doesn't like if we GC iframe\r\n    // immediately, thus this timeout.\r\n    setTimeout(function() {\r\n      debug('cleaning up', id);\r\n      iframe.parentNode.removeChild(iframe);\r\n      iframe = null;\r\n    }, 500);\r\n    area.value = '';\r\n    // It is not possible to detect if the iframe succeeded or\r\n    // failed to submit our form.\r\n    callback(err);\r\n  };\r\n  iframe.onerror = function() {\r\n    debug('onerror', id);\r\n    completed();\r\n  };\r\n  iframe.onload = function() {\r\n    debug('onload', id);\r\n    completed();\r\n  };\r\n  iframe.onreadystatechange = function(e) {\r\n    debug('onreadystatechange', id, iframe.readyState, e);\r\n    if (iframe.readyState === 'complete') {\r\n      completed();\r\n    }\r\n  };\r\n  return function() {\r\n    debug('aborted', id);\r\n    completed(new Error('Aborted'));\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}